<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/arcadia/navigation/HomeTabsNavigation.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/arcadia/navigation/HomeTabsNavigation.kt" />
              <option name="originalContent" value="package com.example.arcadia.navigation&#10;&#10;import androidx.compose.animation.AnimatedContent&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.animation.fadeIn&#10;import androidx.compose.animation.fadeOut&#10;import androidx.compose.animation.slideInHorizontally&#10;import androidx.compose.animation.slideOutHorizontally&#10;import androidx.compose.animation.togetherWith&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.PaddingValues&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.ExperimentalMaterial3ExpressiveApi&#10;import androidx.compose.material3.LoadingIndicator&#10;import androidx.compose.material3.SnackbarDuration&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation3.runtime.NavEntry&#10;import androidx.navigation3.runtime.NavKey&#10;import androidx.navigation3.runtime.rememberNavBackStack&#10;import androidx.navigation3.ui.NavDisplay&#10;import com.example.arcadia.presentation.screens.home.HomeViewModel&#10;import com.example.arcadia.presentation.screens.home.components.GameListItem&#10;import com.example.arcadia.presentation.screens.home.components.LargeGameCard&#10;import com.example.arcadia.presentation.screens.home.components.SectionHeader&#10;import com.example.arcadia.presentation.screens.home.components.SmallGameCard&#10;import com.example.arcadia.presentation.screens.myGames.MyGamesScreen&#10;import com.example.arcadia.ui.theme.ButtonPrimary&#10;import com.example.arcadia.ui.theme.Surface&#10;import com.example.arcadia.ui.theme.TextSecondary&#10;import com.example.arcadia.util.RequestState&#10;import kotlinx.coroutines.launch&#10;import kotlinx.serialization.Serializable&#10;import org.koin.androidx.compose.koinViewModel&#10;&#10;@Serializable&#10;sealed interface HomeTabKey : NavKey&#10;&#10;@Serializable&#10;object HomeTab : HomeTabKey&#10;&#10;@Serializable&#10;object DiscoverTab : HomeTabKey&#10;&#10;@Serializable&#10;object LibraryTab : HomeTabKey&#10;&#10;@Composable&#10;fun HomeTabsNavContent(&#10;    modifier: Modifier = Modifier,&#10;    selectedIndex: Int,&#10;    onGameClick: (Int) -&gt; Unit = {},&#10;    snackbarHostState: SnackbarHostState,&#10;    onShowNotification: (String, Boolean) -&gt; Unit = { _, _ -&gt; },&#10;    viewModel: HomeViewModel&#10;) {&#10;    val homeBackStack = rememberNavBackStack(HomeTab)&#10;    val discoverBackStack = rememberNavBackStack(DiscoverTab)&#10;    val libraryBackStack = rememberNavBackStack(LibraryTab)&#10;&#10;    // Animated content with slide and fade transitions&#10;    AnimatedContent(&#10;        targetState = selectedIndex,&#10;        modifier = modifier,&#10;        transitionSpec = {&#10;            val slideDirection = if (targetState &gt; initialState) 1 else -1&#10;            val animationDuration = 200&#10;&#10;            slideInHorizontally(&#10;                initialOffsetX = { fullWidth -&gt; slideDirection * fullWidth / 3 },&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            ) + fadeIn(&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            ) togetherWith slideOutHorizontally(&#10;                targetOffsetX = { fullWidth -&gt; -slideDirection * fullWidth / 3 },&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            ) + fadeOut(&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            )&#10;        },&#10;        label = &quot;tab_transition&quot;&#10;    ) { targetIndex -&gt;&#10;        when (targetIndex) {&#10;            0 -&gt; {&#10;                NavDisplay(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    backStack = homeBackStack,&#10;                    entryProvider = { key -&gt;&#10;                        when (key) {&#10;                            is HomeTab -&gt; NavEntry(key) {&#10;                                HomeTabRoot(&#10;                                    onGameClick = onGameClick,&#10;                                    snackbarHostState = snackbarHostState,&#10;                                    onShowNotification = onShowNotification,&#10;                                    viewModel = viewModel&#10;                                )&#10;                            }&#10;                            else -&gt; error(&quot;Unknown key for HomeTab backstack: $key&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;            1 -&gt; {&#10;                NavDisplay(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    backStack = discoverBackStack,&#10;                    entryProvider = { key -&gt;&#10;                        when (key) {&#10;                            is DiscoverTab -&gt; NavEntry(key) {&#10;                                DiscoverTabRoot(&#10;                                    onGameClick = onGameClick,&#10;                                    snackbarHostState = snackbarHostState,&#10;                                    onShowNotification = onShowNotification,&#10;                                    viewModel = viewModel&#10;                                )&#10;                            }&#10;                            else -&gt; error(&quot;Unknown key for DiscoverTab backstack: $key&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;            2 -&gt; {&#10;                NavDisplay(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    backStack = libraryBackStack,&#10;                    entryProvider = { key -&gt;&#10;                        when (key) {&#10;                            is LibraryTab -&gt; NavEntry(key) {&#10;                                LibraryTabRoot(onGameClick = onGameClick)&#10;                            }&#10;                            else -&gt; error(&quot;Unknown key for LibraryTab backstack: $key&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;@OptIn(ExperimentalMaterial3ExpressiveApi::class)&#10;&#10;@Composable&#10;private fun HomeTabRoot(&#10;    onGameClick: (Int) -&gt; Unit,&#10;    snackbarHostState: SnackbarHostState,&#10;    onShowNotification: (String, Boolean) -&gt; Unit,&#10;    viewModel: HomeViewModel&#10;) {&#10;    val screenState = viewModel.screenState&#10;    val coroutineScope = rememberCoroutineScope()&#10;&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Surface),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp),&#10;            contentPadding = PaddingValues(bottom = 16.dp)&#10;        ) {&#10;            // Popular Games Section (Carousel)&#10;            item {&#10;                SectionHeader(&#10;                    title = &quot;Popular Games&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;&#10;                when (val state = screenState.popularGames) {&#10;                    is RequestState.Loading -&gt; {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(200.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                    is RequestState.Success -&gt; {&#10;                        LazyRow(&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            contentPadding = PaddingValues(horizontal = 16.dp)&#10;                        ) {&#10;                            items(state.data, key = { it.id }) { game -&gt;&#10;                                LargeGameCard(&#10;                                    game = game,&#10;                                    onClick = { onGameClick(game.id) }&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                    is RequestState.Error -&gt; {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                    else -&gt; {}&#10;                }&#10;            }&#10;&#10;            // Upcoming Games Section&#10;            item {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                SectionHeader(&#10;                    title = &quot;Upcoming&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;&#10;                when (val state = screenState.upcomingGames) {&#10;                    is RequestState.Loading -&gt; {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(140.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                    is RequestState.Success -&gt; {&#10;                        LazyRow(&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            contentPadding = PaddingValues(horizontal = 16.dp)&#10;                        ) {&#10;                            items(state.data, key = { it.id }) { game -&gt;&#10;                                SmallGameCard(&#10;                                    game = game,&#10;                                    onClick = { onGameClick(game.id) }&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                    is RequestState.Error -&gt; {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                    else -&gt; {}&#10;                }&#10;            }&#10;&#10;            // Playlist Recommendation Section (as list items)&#10;            item {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                SectionHeader(&#10;                    title = &quot;Playlist Recommendation&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;            }&#10;            // Recommended Games Section&#10;            when (val state = screenState.recommendedGames) {&#10;                is RequestState.Loading -&gt; {&#10;                    item {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(200.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                }&#10;                is RequestState.Success -&gt; {&#10;                    items(&#10;                        items = state.data.take(3),&#10;                        key = { it.id }&#10;                    ) { game -&gt;&#10;                        GameListItem(&#10;                            game = game,&#10;                            isInLibrary = viewModel.isGameInLibrary(game.id),&#10;                            onClick = { onGameClick(game.id) },&#10;                            onAddToLibrary = {&#10;                                viewModel.addGameToLibrary(&#10;                                    game = game,&#10;                                    onSuccess = {&#10;                                        onShowNotification(&quot;${game.name} added to library&quot;, true)&#10;                                    },&#10;                                    onError = { error -&gt;&#10;                                        onShowNotification(&quot;Failed to add game: $error&quot;, false)&#10;                                    },&#10;                                    onAlreadyInLibrary = {&#10;                                        onShowNotification(&quot;${game.name} is already in your library&quot;, false)&#10;                                    }&#10;                                )&#10;                            },&#10;                            modifier = Modifier.animateItem()&#10;                        )&#10;                    }&#10;                }&#10;                is RequestState.Error -&gt; {&#10;                    item {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                }&#10;                else -&gt; {}&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3ExpressiveApi::class)&#10;@Composable&#10;private fun DiscoverTabRoot(&#10;    onGameClick: (Int) -&gt; Unit,&#10;    snackbarHostState: SnackbarHostState,&#10;    onShowNotification: (String, Boolean) -&gt; Unit,&#10;    viewModel: HomeViewModel&#10;) {&#10;    val screenState = viewModel.screenState&#10;    val coroutineScope = rememberCoroutineScope()&#10;&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Surface),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp),&#10;            contentPadding = PaddingValues(bottom = 16.dp)&#10;        ) {&#10;            // New Releases Section&#10;            item {&#10;                SectionHeader(&#10;                    title = &quot;New Releases&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;&#10;                when (val state = screenState.newReleases) {&#10;                    is RequestState.Loading -&gt; {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(140.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                    is RequestState.Success -&gt; {&#10;                        LazyRow(&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            contentPadding = PaddingValues(horizontal = 16.dp)&#10;                        ) {&#10;                            items(state.data, key = { it.id }) { game -&gt;&#10;                                SmallGameCard(&#10;                                    game = game,&#10;                                    onClick = { onGameClick(game.id) }&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                    is RequestState.Error -&gt; {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                    else -&gt; {}&#10;                }&#10;            }&#10;&#10;            // Recommended Games as list items&#10;            item {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                SectionHeader(&#10;                    title = &quot;Recommended For You&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;            }&#10;&#10;            when (val state = screenState.recommendedGames) {&#10;                is RequestState.Loading -&gt; {&#10;                    item {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(200.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                }&#10;                is RequestState.Success -&gt; {&#10;                    items(&#10;                        items = state.data,&#10;                        key = { it.id }&#10;                    ) { game -&gt;&#10;                        GameListItem(&#10;                            game = game,&#10;                            isInLibrary = viewModel.isGameInLibrary(game.id),&#10;                            onClick = { onGameClick(game.id) },&#10;                            onAddToLibrary = {&#10;                                viewModel.addGameToLibrary(&#10;                                    game = game,&#10;                                    onSuccess = {&#10;                                        onShowNotification(&quot;${game.name} added to library&quot;, true)&#10;                                    },&#10;                                    onError = { error -&gt;&#10;                                        onShowNotification(&quot;Failed to add game: $error&quot;, false)&#10;                                    },&#10;                                    onAlreadyInLibrary = {&#10;                                        onShowNotification(&quot;${game.name} is already in your library&quot;, false)&#10;                                    }&#10;                                )&#10;                            },&#10;                            modifier = Modifier.animateItem()&#10;                        )&#10;                    }&#10;                }&#10;                is RequestState.Error -&gt; {&#10;                    item {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                }&#10;                else -&gt; {}&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LibraryTabRoot(&#10;    onGameClick: (Int) -&gt; Unit&#10;) {&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        MyGamesScreen(&#10;            onNavigateBack = { /* Don't navigate back, we're in a tab */ },&#10;            onGameClick = onGameClick&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ErrorSection(&#10;    message: String,&#10;    onRetry: () -&gt; Unit&#10;) {&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally&#10;    ) {&#10;        Text(&#10;            text = &quot;⚠️&quot;,&#10;            fontSize = 48.sp&#10;        )&#10;        Text(&#10;            text = &quot;Something went wrong&quot;,&#10;            color = TextSecondary,&#10;            fontSize = 16.sp,&#10;            fontWeight = FontWeight.SemiBold,&#10;            modifier = Modifier.padding(top = 8.dp)&#10;        )&#10;        Text(&#10;            text = message,&#10;            color = TextSecondary.copy(alpha = 0.7f),&#10;            fontSize = 13.sp,&#10;            modifier = Modifier.padding(top = 4.dp)&#10;        )&#10;        TextButton(&#10;            onClick = onRetry,&#10;            modifier = Modifier.padding(top = 16.dp)&#10;        ) {&#10;            Text(&#10;                text = &quot;Retry&quot;,&#10;                color = ButtonPrimary,&#10;                fontSize = 14.sp,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.arcadia.navigation&#10;&#10;import androidx.compose.animation.AnimatedContent&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.animation.fadeIn&#10;import androidx.compose.animation.fadeOut&#10;import androidx.compose.animation.slideInHorizontally&#10;import androidx.compose.animation.slideOutHorizontally&#10;import androidx.compose.animation.togetherWith&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.PaddingValues&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.ExperimentalMaterial3ExpressiveApi&#10;import androidx.compose.material3.LoadingIndicator&#10;import androidx.compose.material3.SnackbarDuration&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation3.runtime.NavEntry&#10;import androidx.navigation3.runtime.NavKey&#10;import androidx.navigation3.runtime.rememberNavBackStack&#10;import androidx.navigation3.ui.NavDisplay&#10;import com.example.arcadia.presentation.screens.home.HomeViewModel&#10;import com.example.arcadia.presentation.screens.home.components.GameListItem&#10;import com.example.arcadia.presentation.screens.home.components.LargeGameCard&#10;import com.example.arcadia.presentation.screens.home.components.SectionHeader&#10;import com.example.arcadia.presentation.screens.home.components.SmallGameCard&#10;import com.example.arcadia.presentation.screens.myGames.MyGamesScreen&#10;import com.example.arcadia.ui.theme.ButtonPrimary&#10;import com.example.arcadia.ui.theme.Surface&#10;import com.example.arcadia.ui.theme.TextSecondary&#10;import com.example.arcadia.util.RequestState&#10;import kotlinx.coroutines.launch&#10;import kotlinx.serialization.Serializable&#10;import org.koin.androidx.compose.koinViewModel&#10;&#10;@Serializable&#10;sealed interface HomeTabKey : NavKey&#10;&#10;@Serializable&#10;object HomeTab : HomeTabKey&#10;&#10;@Serializable&#10;object DiscoverTab : HomeTabKey&#10;&#10;@Serializable&#10;object LibraryTab : HomeTabKey&#10;&#10;@Composable&#10;fun HomeTabsNavContent(&#10;    modifier: Modifier = Modifier,&#10;    selectedIndex: Int,&#10;    onGameClick: (Int) -&gt; Unit = {},&#10;    snackbarHostState: SnackbarHostState,&#10;    onShowNotification: (String, Boolean) -&gt; Unit = { _, _ -&gt; },&#10;    viewModel: HomeViewModel&#10;) {&#10;    val homeBackStack = rememberNavBackStack(HomeTab)&#10;    val discoverBackStack = rememberNavBackStack(DiscoverTab)&#10;    val libraryBackStack = rememberNavBackStack(LibraryTab)&#10;&#10;    // Animated content with slide and fade transitions&#10;    AnimatedContent(&#10;        targetState = selectedIndex,&#10;        modifier = modifier,&#10;        transitionSpec = {&#10;            val slideDirection = if (targetState &gt; initialState) 1 else -1&#10;            val animationDuration = 200&#10;&#10;            slideInHorizontally(&#10;                initialOffsetX = { fullWidth -&gt; slideDirection * fullWidth / 3 },&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            ) + fadeIn(&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            ) togetherWith slideOutHorizontally(&#10;                targetOffsetX = { fullWidth -&gt; -slideDirection * fullWidth / 3 },&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            ) + fadeOut(&#10;                animationSpec = tween(durationMillis = animationDuration)&#10;            )&#10;        },&#10;        label = &quot;tab_transition&quot;&#10;    ) { targetIndex -&gt;&#10;        when (targetIndex) {&#10;            0 -&gt; {&#10;                NavDisplay(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    backStack = homeBackStack,&#10;                    entryProvider = { key -&gt;&#10;                        when (key) {&#10;                            is HomeTab -&gt; NavEntry(key) {&#10;                                HomeTabRoot(&#10;                                    onGameClick = onGameClick,&#10;                                    snackbarHostState = snackbarHostState,&#10;                                    onShowNotification = onShowNotification,&#10;                                    viewModel = viewModel&#10;                                )&#10;                            }&#10;                            else -&gt; error(&quot;Unknown key for HomeTab backstack: $key&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;            1 -&gt; {&#10;                NavDisplay(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    backStack = discoverBackStack,&#10;                    entryProvider = { key -&gt;&#10;                        when (key) {&#10;                            is DiscoverTab -&gt; NavEntry(key) {&#10;                                DiscoverTabRoot(&#10;                                    onGameClick = onGameClick,&#10;                                    snackbarHostState = snackbarHostState,&#10;                                    onShowNotification = onShowNotification,&#10;                                    viewModel = viewModel&#10;                                )&#10;                            }&#10;                            else -&gt; error(&quot;Unknown key for DiscoverTab backstack: $key&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;            2 -&gt; {&#10;                NavDisplay(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    backStack = libraryBackStack,&#10;                    entryProvider = { key -&gt;&#10;                        when (key) {&#10;                            is LibraryTab -&gt; NavEntry(key) {&#10;                                LibraryTabRoot(onGameClick = onGameClick)&#10;                            }&#10;                            else -&gt; error(&quot;Unknown key for LibraryTab backstack: $key&quot;)&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;@OptIn(ExperimentalMaterial3ExpressiveApi::class)&#10;&#10;@Composable&#10;private fun HomeTabRoot(&#10;    onGameClick: (Int) -&gt; Unit,&#10;    snackbarHostState: SnackbarHostState,&#10;    onShowNotification: (String, Boolean) -&gt; Unit,&#10;    viewModel: HomeViewModel&#10;) {&#10;    val popularGames by viewModel.popularGames.collectAsState()&#10;    val upcomingGames by viewModel.upcomingGames.collectAsState()&#10;    val recommendedGames by viewModel.recommendedGames.collectAsState()&#10;    val coroutineScope = rememberCoroutineScope()&#10;&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Surface),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp),&#10;            contentPadding = PaddingValues(bottom = 16.dp)&#10;        ) {&#10;            // Popular Games Section (Carousel)&#10;            item {&#10;                SectionHeader(&#10;                    title = &quot;Popular Games&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;&#10;                when (val state = popularGames) {&#10;                    is RequestState.Loading -&gt; {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(200.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                    is RequestState.Success -&gt; {&#10;                        LazyRow(&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            contentPadding = PaddingValues(horizontal = 16.dp)&#10;                        ) {&#10;                            items(state.data, key = { it.id }) { game -&gt;&#10;                                LargeGameCard(&#10;                                    game = game,&#10;                                    onClick = { onGameClick(game.id) }&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                    is RequestState.Error -&gt; {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                    else -&gt; {}&#10;                }&#10;            }&#10;&#10;            // Upcoming Games Section&#10;            item {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                SectionHeader(&#10;                    title = &quot;Upcoming&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;&#10;                when (val state = upcomingGames) {&#10;                    is RequestState.Loading -&gt; {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(140.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                    is RequestState.Success -&gt; {&#10;                        LazyRow(&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            contentPadding = PaddingValues(horizontal = 16.dp)&#10;                        ) {&#10;                            items(state.data, key = { it.id }) { game -&gt;&#10;                                SmallGameCard(&#10;                                    game = game,&#10;                                    onClick = { onGameClick(game.id) }&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                    is RequestState.Error -&gt; {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                    else -&gt; {}&#10;                }&#10;            }&#10;&#10;            // Playlist Recommendation Section (as list items)&#10;            item {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                SectionHeader(&#10;                    title = &quot;Playlist Recommendation&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;            }&#10;            // Recommended Games Section&#10;            when (val state = recommendedGames) {&#10;                is RequestState.Loading -&gt; {&#10;                    item {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(200.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                }&#10;                is RequestState.Success -&gt; {&#10;                    items(&#10;                        items = state.data.take(3),&#10;                        key = { it.id }&#10;                    ) { game -&gt;&#10;                        GameListItem(&#10;                            game = game,&#10;                            isInLibrary = viewModel.isGameInLibrary(game.id),&#10;                            onClick = { onGameClick(game.id) },&#10;                            onAddToLibrary = {&#10;                                viewModel.addGameToLibrary(&#10;                                    game = game,&#10;                                    onSuccess = {&#10;                                        onShowNotification(&quot;${game.name} added to library&quot;, true)&#10;                                    },&#10;                                    onError = { error -&gt;&#10;                                        onShowNotification(&quot;Failed to add game: $error&quot;, false)&#10;                                    },&#10;                                    onAlreadyInLibrary = {&#10;                                        onShowNotification(&quot;${game.name} is already in your library&quot;, false)&#10;                                    }&#10;                                )&#10;                            },&#10;                            modifier = Modifier.animateItem()&#10;                        )&#10;                    }&#10;                }&#10;                is RequestState.Error -&gt; {&#10;                    item {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                }&#10;                else -&gt; {}&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3ExpressiveApi::class)&#10;@Composable&#10;private fun DiscoverTabRoot(&#10;    onGameClick: (Int) -&gt; Unit,&#10;    snackbarHostState: SnackbarHostState,&#10;    onShowNotification: (String, Boolean) -&gt; Unit,&#10;    viewModel: HomeViewModel&#10;) {&#10;    val newReleases by viewModel.newReleases.collectAsState()&#10;    val recommendedGames by viewModel.recommendedGames.collectAsState()&#10;    val coroutineScope = rememberCoroutineScope()&#10;&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Surface),&#10;            verticalArrangement = Arrangement.spacedBy(16.dp),&#10;            contentPadding = PaddingValues(bottom = 16.dp)&#10;        ) {&#10;            // New Releases Section&#10;            item {&#10;                SectionHeader(&#10;                    title = &quot;New Releases&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;&#10;                when (val state = newReleases) {&#10;                    is RequestState.Loading -&gt; {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(140.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                    is RequestState.Success -&gt; {&#10;                        LazyRow(&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            contentPadding = PaddingValues(horizontal = 16.dp)&#10;                        ) {&#10;                            items(state.data, key = { it.id }) { game -&gt;&#10;                                SmallGameCard(&#10;                                    game = game,&#10;                                    onClick = { onGameClick(game.id) }&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                    is RequestState.Error -&gt; {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                    else -&gt; {}&#10;                }&#10;            }&#10;&#10;            // Recommended Games as list items&#10;            item {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                SectionHeader(&#10;                    title = &quot;Recommended For You&quot;,&#10;                    onSeeAllClick = { /* TODO */ }&#10;                )&#10;            }&#10;&#10;            when (val state = recommendedGames) {&#10;                is RequestState.Loading -&gt; {&#10;                    item {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(200.dp),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            LoadingIndicator(color = ButtonPrimary)&#10;                        }&#10;                    }&#10;                }&#10;                is RequestState.Success -&gt; {&#10;                    items(&#10;                        items = state.data,&#10;                        key = { it.id }&#10;                    ) { game -&gt;&#10;                        GameListItem(&#10;                            game = game,&#10;                            isInLibrary = viewModel.isGameInLibrary(game.id),&#10;                            onClick = { onGameClick(game.id) },&#10;                            onAddToLibrary = {&#10;                                viewModel.addGameToLibrary(&#10;                                    game = game,&#10;                                    onSuccess = {&#10;                                        onShowNotification(&quot;${game.name} added to library&quot;, true)&#10;                                    },&#10;                                    onError = { error -&gt;&#10;                                        onShowNotification(&quot;Failed to add game: $error&quot;, false)&#10;                                    },&#10;                                    onAlreadyInLibrary = {&#10;                                        onShowNotification(&quot;${game.name} is already in your library&quot;, false)&#10;                                    }&#10;                                )&#10;                            },&#10;                            modifier = Modifier.animateItem()&#10;                        )&#10;                    }&#10;                }&#10;                is RequestState.Error -&gt; {&#10;                    item {&#10;                        ErrorSection(&#10;                            message = state.message,&#10;                            onRetry = { viewModel.retry() }&#10;                        )&#10;                    }&#10;                }&#10;                else -&gt; {}&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LibraryTabRoot(&#10;    onGameClick: (Int) -&gt; Unit&#10;) {&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        MyGamesScreen(&#10;            onNavigateBack = { /* Don't navigate back, we're in a tab */ },&#10;            onGameClick = onGameClick&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ErrorSection(&#10;    message: String,&#10;    onRetry: () -&gt; Unit&#10;) {&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally&#10;    ) {&#10;        Text(&#10;            text = &quot;⚠️&quot;,&#10;            fontSize = 48.sp&#10;        )&#10;        Text(&#10;            text = &quot;Something went wrong&quot;,&#10;            color = TextSecondary,&#10;            fontSize = 16.sp,&#10;            fontWeight = FontWeight.SemiBold,&#10;            modifier = Modifier.padding(top = 8.dp)&#10;        )&#10;        Text(&#10;            text = message,&#10;            color = TextSecondary.copy(alpha = 0.7f),&#10;            fontSize = 13.sp,&#10;            modifier = Modifier.padding(top = 4.dp)&#10;        )&#10;        TextButton(&#10;            onClick = onRetry,&#10;            modifier = Modifier.padding(top = 16.dp)&#10;        ) {&#10;            Text(&#10;                text = &quot;Retry&quot;,&#10;                color = ButtonPrimary,&#10;                fontSize = 14.sp,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>